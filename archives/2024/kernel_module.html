<!DOCTYPE html>
<html class="theme-next mist use-motion">

<head>
    <title>Benedict | Tech Blog</title>
    <link rel="stylesheet" href="../../lib/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png">
    <link rel="shortcut icon" href="../../images/favico.ico" type="image/x-icon" />
    <link rel="mask-icon" href="../../images/logo.svg" color="#222">
    <script src="../../js/script.js"></script>
    <meta name="description"
        content="This article will guide you to implement System Information Fetching Kernel Module.">
    <meta name="keywords"
        content="張永義, Benedict Tiong, 張永義 Benedict Tiong, 張永義 Tiong Ing Ngie, 張永義 Ing Ngie, Tiong Ing Ngie, 張永義 Benedict, Benedict Tiong Ing Ngie, 永義, Benedict, 永義張, Tiong Benedict, Benedict-CS, benedict, benedict tiong">
    <meta name="robots" content="index, follow">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2">
    <!-- <meta property="og:title" content="Tags - Benedict | Tech Blog"> -->
    <meta property="og:description"
        content="This article will guide you to implement System Information Fetching Kernel Module.">
    <meta property="og:image" content="../../images/me.jpg">
    <meta property="og:url"
        content="https://benedict-cs.github.io/Me/archives/2023/%E5%A4%A7%E5%AD%B8%E7%95%A2%E6%A5%AD%E7%84%B6%E5%BE%8C%E5%91%A2.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Benedict | Tech Blog">
    <!-- <meta name="twitter:title" content="Tags - Benedict | Tech Blog"> -->
    <meta name="twitter:title" content="Tags - 張永義">
    <meta name="twitter:description"
        content="This article will guide you to implement System Information Fetching Kernel Module.">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image:src" content="../../images/me.jpg">
    <meta name="twitter:domain" content="benedict-cs.github.io/Me">
    <meta name='robots' content='max-image-preview:large' />
    <meta itemprop="name" content="張永義">
    <meta property="og:title" content="張永義">
</head>

<body>
    <div class="container sidebar-position-left page-post-detail">
        <header id="header" class="header">
            <div class="header-inner">
                <div class="site-brand-wrapper">
                    <!-- 左上角的logo -->
                    <div class="site-meta">
                        <div class="custom-logo-site-title">
                            <a href="./index.html" class="brand" rel="start">
                                <span class="logo-line-before"><i></i></span>
                                <span class="site-title">Benedict's world</span>
                                <span class="logo-line-after"><i></i></span>
                            </a>
                        </div>
                    </div>
                    <!-- 右上角RWD才會出來的漢堡選單 -->
                    <div class="site-nav-toggle">
                        <button aria-label="Toggle navigation bar">
                            <span class="btn-bar"></span>
                            <span class="btn-bar"></span>
                            <span class="btn-bar"></span>
                        </button>
                    </div>
                </div>
                <!-- 中間的 navbar -->
                <nav class="site-nav" class="navbar">
                    <ul id="menu" class="menu">
                        <li class="menu-item menu-item-home ">
                            <a href="../../index.html" rel="section">
                                <i class="menu-item-icon fa fa-fw fa-home"></i>
                                Home
                            </a>
                        </li>
                        <li class="menu-item menu-item-archives menu-item-active">
                            <a href="../../tags/index.html" rel="section">
                                <i class="menu-item-icon fa fa-fw fa-tags"></i>
                                Tags
                            </a>
                        </li>
                        <li class="menu-item menu-item-archives">
                            <a href="../../archives/index.html" rel="section">
                                <i class="menu-item-icon fa fa-fw fa-archive"></i>
                                Archives
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </header>
        <main id="main" class="main">
            <div class="main-inner">
                <div class="content-wrap">
                    <div id="content" class="content">
                        <div id="posts" class="posts-expand">
                            <article class="post post-type-normal">
                                <div class="post-block">
                                    <header class="post-header">
                                        <h1 class="post-title">
                                            System Information Fetching Kernel Module
                                        </h1>

                                        
                                        <div class="post-meta">
                                            <span class="post-time">
                                                <span class="post-meta-item-icon">
                                                    <i class="fa fa-calendar-o"></i>
                                                    Posted on <time>2024-01-28</time>
                                                </span>
                                            </span>
                                            <span class="post-meta-divider">|</span>
                                            <span class="post-time">
                                                <span class="post-meta-item-icon">
                                                    <i class="fa fa-tag"></i>
                                                    <a href="../../tags/OS/index.html">OS</a>
                                                </span>
                                            </span>
                                            <span class="post-meta-divider">|</span>
                                            <span class="post-meta-item-icon">
                                                <i class="fa fa-eye"></i>Views:
                                                <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
                                            </span>
                                        </div>
                                    </header>


                                    <div class="post-body">
                                        <h2 id="Outline"><a href="#Outline" class="headerlink" title="Outline"></a>Outline
                                        </h2>
                                     

                                                <ul>
                                                    <li><h4>System Information Fetching Kernel Module</h4>
                                                        <ul>
                                                            <li>Linux Kernel Module</li>
                                                            <li>Descriptions</li>
                                                            <li>Kernel Module: kfetch_mod
                                                                <ul>
                                                                    <li>Kfetch information mask</li>
                                                                    <li>Device operations </li>
                                                                </ul>
                                                            </li>
                                                            <li>Requirements
                                                                <ul>
                                                                    <li>Default logo </li>
                                                                </ul>

                                                            </li>

                                                        </ul>
                                                    </li>
                                                   
                                                </ul>

                                                <p>In this article, you are going to implement a kernel module that fetches the system information from the kernel, like below screenshot:</p>

                                                <div>
                                                    <img alt="張永義 競賽圖片" src="./images/OS_3/OS_1.png" />
                                                </div>



                                    <div class="post-body">
                                        <h2 id="Content"><a href="#Content" class="headerlink" title="Content"></a>Implement a kernel module fetches system info from kernel
                                        </h2>
                                        <p><b>Step 1: Create new program</b></p>
                                        <figure class="highlight plain">
                                            <table>
                                                <tr>
                                                    <td class="code">
                                                        <pre><span class="line">vim kfetch_mod_312551002.c</span><br></pre>
                                                    </td>
                                                </tr>
                                            </table>
                                        </figure>
                                        <p><b>
                                            Step 2: Implement the fetches system information function
                                            </b>
                                        </p>

<figure class="highlight plain">
    <div class="table-container">
        <table>
            <tbody>
                <tr>
<td class="gutter">
    <pre>
1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br>81<br>82<br>83<br>84<br>85<br>86<br>87<br>88<br>89<br>90<br>91<br>92<br>93<br>94<br>95<br>96<br>97<br>98<br>99<br>100<br>101<br>102<br>103<br>104<br>105<br>106<br>107<br>108<br>109<br>110<br>111<br>112<br>113<br>114<br>115<br>116<br>117<br>118<br>119<br>120<br>121<br>122<br>123<br>124<br>125<br>126<br>127<br>128<br>129<br>130<br>131<br>132<br>133<br>134<br>135<br>136<br>137<br>138<br>139<br>140<br>141<br>142<br>143<br>144<br>145<br>146<br>147<br>148<br>149<br>150<br>151<br>152<br>153<br>154<br>155<br>156<br>157<br>158<br>159<br>160<br>161<br>162<br>163<br>164<br>165<br>166<br>167<br>168<br>169<br>170<br>171<br>172<br>173<br>174<br>175<br>176<br>177<br>178<br>179<br>180<br>181<br>182<br>183<br>184<br>185<br>186<br>187<br>188<br>189<br>190<br>191<br>192<br>193<br>194<br>195<br>196<br>197<br>198<br>199<br>200<br>201<br>202<br>203<br>204<br>205<br>206<br>207<br>208<br>209<br>210<br>211<br>212<br>213<br>214<br>215<br>216<br>217<br>218<br>219<br>220<br>221<br>222<br>223<br>224<br>225<br>226<br>227<br>228<br>229<br>230<br>231<br>232<br>233<br>234<br>235<br>236<br>237<br>238<br>239<br>240<br>241<br>242<br>243<br>244<br>245<br>246<br>247<br>248<br>249<br>250<br>251</pre>
</td>

                    <td class="code">
<pre>
#include &lt;linux/module.h&gt;
#include &lt;linux/kernel.h&gt;
#include &lt;linux/fs.h&gt;
#include &lt;linux/cdev.h&gt;
#include &lt;linux/device.h&gt;
#include &lt;linux/uaccess.h&gt;
#include &lt;linux/slab.h&gt;
#include &lt;linux/mm.h&gt;       // For si_meminfo
#include &lt;linux/utsname.h&gt;
#include &lt;linux/timekeeping.h&gt;
#include &lt;linux/sched.h&gt;
#include &lt;linux/sched/stat.h&gt;
#include &lt;linux/cpu.h&gt;
#include &lt;linux/sched/signal.h&gt;
#include &lt;linux/utsname.h&gt;

#define DEVICE_NAME "kfetch_mod_312551002"
#define CLASS_NAME "kfetch"
#define BUFFER_SIZE 1024

// Information mask definitions
#define KFETCH_NUM_INFO 6
#define KFETCH_RELEASE   (1 &lt;&lt; 0)
#define KFETCH_NUM_CPUS  (1 &lt;&lt; 1)
#define KFETCH_CPU_MODEL (1 &lt;&lt; 2)
#define KFETCH_MEM       (1 &lt;&lt; 3)
#define KFETCH_UPTIME    (1 &lt;&lt; 4)
#define KFETCH_NUM_PROCS (1 &lt;&lt; 5)
#define KFETCH_FULL_INFO ((1 &lt;&lt; KFETCH_NUM_INFO) - 1)

static int majorNumber;
static struct class *kfetchClass = NULL;
static struct cdev kfetchCdev;
static int mask_info = KFETCH_FULL_INFO;
static char data_buffer[BUFFER_SIZE];

static int dev_open(struct inode *, struct file *);
static ssize_t dev_read(struct file *, char *, size_t, loff_t *);
static ssize_t dev_write(struct file *, const char __user *, size_t, loff_t *);
static int dev_release(struct inode *, struct file *);

static struct file_operations fops = {
    .open = dev_open,
    .read = dev_read,
    .write = dev_write,
    .release = dev_release,
};

static int __init kfetch_init(void) {
    printk(KERN_INFO "Kfetch: Initializing the Kfetch Module\n");
    majorNumber = register_chrdev(0, DEVICE_NAME, &fops);
    if (majorNumber &lt; 0) {
        printk(KERN_ALERT "Kfetch failed to register a major number\n");
        return majorNumber;
    }

    printk(KERN_INFO "Kfetch: Registered with major number %d\n", majorNumber);
    kfetchClass = class_create(THIS_MODULE, CLASS_NAME);

    if (IS_ERR(kfetchClass)) {
        unregister_chrdev(majorNumber, DEVICE_NAME);
        printk(KERN_ALERT "Failed to register device class\n");
        return PTR_ERR(kfetchClass);
    }

    if (IS_ERR(device_create(kfetchClass, NULL, MKDEV(majorNumber, 0), NULL, DEVICE_NAME))) {
        class_destroy(kfetchClass);
        unregister_chrdev(majorNumber, DEVICE_NAME);
        printk(KERN_ALERT "Failed to create the device\n");
        return PTR_ERR(device_create(kfetchClass, NULL, MKDEV(majorNumber, 0), NULL, DEVICE_NAME));
    }

    cdev_init(&kfetchCdev, &fops);

    if (cdev_add(&kfetchCdev, MKDEV(majorNumber, 0), 1) &lt; 0) {
        device_destroy(kfetchClass, MKDEV(majorNumber, 0));
        class_destroy(kfetchClass);
        unregister_chrdev(majorNumber, DEVICE_NAME);
        printk(KERN_ALERT "Failed to add cdev\n");
        return -1;
    }

    printk(KERN_INFO "Kfetch: Device class created correctly\n");
    return 0;
}

static void __exit kfetch_exit(void) {
    cdev_del(&kfetchCdev);
    device_destroy(kfetchClass, MKDEV(majorNumber, 0));
    class_destroy(kfetchClass);
    unregister_chrdev(majorNumber, DEVICE_NAME);
    printk(KERN_INFO "Kfetch: Module successfully unloaded\n");
}

static int dev_open(struct inode *inodep, struct file *filep) {
    printk(KERN_INFO "Kfetch: Device has been opened\n");
    return 0;
}

static int dev_release(struct inode *inodep, struct file *filep) {
    printk(KERN_INFO "Kfetch: Device successfully closed\n");
    return 0;
}

static ssize_t dev_read(struct file *filep, char *buffer, size_t len, loff_t *offset) {
    struct sysinfo si;
    struct timespec64 uptime;
    unsigned long mem_free_mb, mem_total_mb, uptime_seconds;
    int num_procs = 0;
    struct task_struct *task;
    char *info = NULL;
    char *formatted_output = NULL;
    char *info_ptr;
    char *line;
    char *next_info;
    char *next_line;
    int i;

    char hostname[65]; // HOST_NAME_MAX typically is 64
    char separator_line[65]; // Same size as hostname for simplicity
    const char *logo_lines[] = {
        "       \e[33mLinux\e[0m        ",
        "        .-.        ",
        "       (.. |       ",
        "       \e[33m<>\e[0m  |        ",
        "      / --- \\      ",
        "     ( |   | |     ",
        "   \e[33m|\\\e[0m\\_)___/\\)\e[33m/\\\e[0m    ",
        "  \e[33m<__)\e[0m------\e[33m(__/\e[0m    "
    };
    size_t hostname_len;

    // Initialize the hostname and separator_line
    memset(hostname, 0, sizeof(hostname));
    strncpy(hostname, init_uts_ns.name.nodename, sizeof(hostname) - 1);
    hostname_len = strlen(hostname);
    memset(separator_line, '-', hostname_len);
    separator_line[hostname_len] = '\0';

    // Clear the buffer
    memset(data_buffer, 0, BUFFER_SIZE);

    // Gather system information
    si_meminfo(&si);
    ktime_get_boottime_ts64(&uptime);
    for_each_process(task) if (task-&gt;mm) num_procs++;

    mem_free_mb = (si.freeram * si.mem_unit) / 1024 / 1024;
    mem_total_mb = (si.totalram * si.mem_unit) / 1024 / 1024;
    uptime_seconds = uptime.tv_sec;

    // Allocate info buffer dynamically
    info = kmalloc(BUFFER_SIZE, GFP_KERNEL);
    formatted_output = kmalloc(BUFFER_SIZE, GFP_KERNEL);

    if (!info || !formatted_output) {
        kfree(info); // It's safe to call kfree with NULL
        kfree(formatted_output);
        return -ENOMEM;
    }

    // Prepare the info string with proper padding for each line
    info_ptr = info;
    info_ptr += snprintf(info_ptr, BUFFER_SIZE - (info_ptr - info), "\e[33m%s\e[0m\n%s\n", hostname, separator_line);

    // Concatenate information based on the mask_info
    if (mask_info & KFETCH_RELEASE || mask_info == KFETCH_FULL_INFO) {
        info_ptr += snprintf(info_ptr, BUFFER_SIZE - (info_ptr - info), "\e[33mKernel:\e[0m  %-20s\n", utsname()-&gt;release);
    }

    if (mask_info & KFETCH_CPU_MODEL || mask_info == KFETCH_FULL_INFO) {
        info_ptr += snprintf(info_ptr, BUFFER_SIZE - (info_ptr - info), "\e[33mCPU:\e[0m     %-20s\n", boot_cpu_data.x86_model_id);
    }

    if (mask_info & KFETCH_NUM_CPUS || mask_info == KFETCH_FULL_INFO) {
        info_ptr += snprintf(info_ptr, BUFFER_SIZE - (info_ptr - info), "\e[33mCPUs:\e[0m    %d / %-14d\n", num_online_cpus(), num_possible_cpus());
    }

    if (mask_info & KFETCH_MEM || mask_info == KFETCH_FULL_INFO) {
        info_ptr += snprintf(info_ptr, BUFFER_SIZE - (info_ptr - info), "\e[33mMem:\e[0m     %lu MB / %lu MB\n", mem_free_mb, mem_total_mb);
    }

    if (mask_info & KFETCH_NUM_PROCS || mask_info == KFETCH_FULL_INFO) {
        info_ptr += snprintf(info_ptr, BUFFER_SIZE - (info_ptr - info), "\e[33mProcs:\e[0m   %-d\n", num_procs);
    }

    if (mask_info & KFETCH_UPTIME || mask_info == KFETCH_FULL_INFO) {
        info_ptr += snprintf(info_ptr, BUFFER_SIZE - (info_ptr - info), "\e[33mUptime:\e[0m  %-lu mins\n", uptime_seconds / 60);
    }

    // Formatting the output to align side by side with the logo
    next_info = info;
    line = formatted_output;

    for (i = 0; i &lt; ARRAY_SIZE(logo_lines) || next_info; ++i) {
        if (i &lt; ARRAY_SIZE(logo_lines)) {
            line += sprintf(line, "%-20s", logo_lines[i]);
        } else {
            line += sprintf(line, "%-20s", "");
        }

        if (next_info) {
            next_line = strchr(next_info, '\n');

            if (next_line) *next_line = '\0'; // Terminate the current line
            line += sprintf(line, " %s\n", next_info);
            next_info = next_line ? next_line + 1 : NULL;
        } else {
            line += sprintf(line, "\n");
        }
    }

    // Copy the formatted buffer to user space
    if (copy_to_user(buffer, formatted_output, strlen(formatted_output))) {
        kfree(info);
        kfree(formatted_output);
        return -EFAULT; // Failed to copy to user space
    }

    // Free the dynamically allocated buffers
    kfree(info);
    kfree(formatted_output);

    // Return the number of characters sent
    return strlen(formatted_output);
}

static ssize_t dev_write(struct file *filep, const char __user *buffer, size_t len, loff_t *offset) {
    // Update mask_info based on user input
    if (len == sizeof(int)) {
        if (copy_from_user(&mask_info, buffer, sizeof(int))) {
            printk(KERN_ERR "Kfetch: Error setting mask_info\n");
            return -EFAULT;
        }

        printk(KERN_INFO "Kfetch: Mask set to %d\n", mask_info);

        return sizeof(int);
    } else {
        printk(KERN_ERR "Kfetch: Incorrect mask size\n");
        return -EINVAL;
    }
}

module_init(kfetch_init);
module_exit(kfetch_exit);

MODULE_LICENSE("GPL");
MODULE_AUTHOR("Benedict");
MODULE_DESCRIPTION("System Information Fetching Kernel Module");
MODULE_VERSION("0.1");
</pre>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</figure>

                                        <p><b>Step 3: Create new Makefile</b>
                                        </p>
                                        <figure class="highlight plain">
                                            <table>
                                                <tr>
                                                    <td class="code">
                                                        <pre><span class="line">vim Makefile</span><br></pre>
                                                    </td>
                                                </tr>
                                            </table>
                                        </figure>
                                        <p><b>Step 4: Implement a Makefile</b></p>
                                        <figure class="highlight plain">
    <div class="table-container">
        <table>
            <tbody>
                <tr>
<td class="gutter">
    <pre>
1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54</pre>
</td>

                    <td class="code">
<pre>
obj-m += kfetch_mod_312551002.o

DEVICE_NAME := kfetch_mod_312551002

# Use shell to grab the major number dynamically. 
MAJOR_NUMBER := $(shell grep $(DEVICE_NAME) /proc/devices | cut -d ' ' -f 1)

all: build unload remove_device_node load create_device_node

build:
	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

load: 
	# Check if module is already loaded, if yes, remove it
	@if lsmod | grep $(DEVICE_NAME) &> /dev/null ; then \
		echo "Module $(DEVICE_NAME) is already loaded, unloading first..."; \
		sudo rmmod $(DEVICE_NAME) || true; \
	fi
	# Insert the module
	sudo insmod $(DEVICE_NAME).ko


create_device_node:
	# Check if device node already exists, if not, create it
	@if [ ! -e /dev/$(DEVICE_NAME) ] ; then \
		echo "Creating device node /dev/$(DEVICE_NAME)..."; \
		sudo mknod /dev/$(DEVICE_NAME) c $(MAJOR_NUMBER) 0 ; \
		sudo chmod 666 /dev/$(DEVICE_NAME) ; \
	else \
		echo "Device node /dev/$(DEVICE_NAME) already exists."; \
	fi

clean:
	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean

unload:
	# Remove the module if it is loaded
	@if lsmod | grep $(DEVICE_NAME) &> /dev/null ; then \
		echo "Unloading module $(DEVICE_NAME)..."; \
		sudo rmmod $(DEVICE_NAME) || true; \
	else \
		echo "Module $(DEVICE_NAME) is not loaded."; \
	fi

remove_device_node:
	# Remove the device node if it exists
	@if [ -e /dev/$(DEVICE_NAME) ] ; then \
		echo "Removing device node /dev/$(DEVICE_NAME)..."; \
		sudo rm -f /dev/$(DEVICE_NAME) ; \
	else \
		echo "Device node /dev/$(DEVICE_NAME) does not exist."; \
	fi

.PHONY: all build load create_device_node clean unload remove_device_node
</pre>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</figure>
                                        <p><b>Step 5: Compile written program</b></p>
                                        <figure class="highlight plain">
                                            <table>
                                                <tr>
                                                    <td class="code">
                                                        <pre><span class="line">make</span><br></pre>
                                                    </td>
                                                </tr>
                                            </table>
                                        </figure>
                                        <p><b>Step 6: Download test program We have prepared the user-space program kfetch for you.</b></p>
                                        <figure class="highlight plain">
                                            <table>
                                                <tr>
                                                    <td class="code">
                                                        <pre><span class="line">wget https://raw.githubusercontent.com/Benedict-CS/Operating-System-NYCU-2023/main/HW3/kfetch.c</span><br></pre>
                                                        <pre><span class="line">wget https://raw.githubusercontent.com/Benedict-CS/Operating-System-NYCU-2023/main/HW3/kfetch.h</span><br></pre>
                                                    </td>
                                                </tr>
                                            </table>
                                        </figure>
                                        <p><b>Step 7: Compile test program kfetch.c and the header file kfetch.h to test your module.</b></p>
                                        <figure class="highlight plain">
                                            <table>
                                                <tr>
                                                    <td class="code">
                                                        <pre><span class="line">cc ./kfetch.c -o kfetch</span><br></pre>
                                                    </td>
                                                </tr>
                                            </table>
                                        </figure>
                                        <p><b>Step 8: Test the program</b></p>
                                        <figure class="highlight plain">
                                            <table>
                                                <tr>
                                                    <td class="code">
                                                        <pre><span class="line">sudo ./kfetch -h</span><br></pre>
                                                    </td>
                                                </tr>
                                            </table>
                                        </figure>

                                        <div>
                                            <center><img alt="張永義 競賽圖片" src="./images/OS_3/OS_2.png" width="600px" /></center>
                                        </div>
<br>
                                        
                                        <p><b>Step 9: Test the program</b></p>
                                        <p>Initially, when the module is loaded, the first invocation without any options will display all the information. If the options -c and m are specified, only the information about the CPU model name and the memory will be displayed.</p>
                                        <figure class="highlight plain">
                                            <table>
                                                <tr>
                                                    <td class="code">
                                                        <pre><span class="line">sudo ./kfetch -a</span><br></pre>
                                                    </td>
                                                </tr>
                                            </table>
                                        </figure>

                                        <div>
                                            <img alt="張永義 競賽圖片" src="./images/OS_3/OS_3.png" />
                                        </div>


                                        <figure class="highlight plain">
                                            <table>
                                                <tr>
                                                    <td class="code">
                                                        <pre><span class="line">sudo ./kfetch -m -c</span><br></pre>
                                                    </td>
                                                </tr>
                                            </table>
                                        </figure>



                                        <div>
                                            <img alt="張永義 競賽圖片" src="./images/OS_3/OS_4.png" />
                                        </div>






                                        <div class="post-body">
                                            <h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference
                                            </h2>
                                            <p><a href="https://hackmd.io/@Cycatz/ryiENe4Oj" target="_blank">https://hackmd.io/@Cycatz/ryiENe4Oj</a></p>
                                            <p><a href="https://github.com/Benedict-CS/Operating-System-NYCU-2023/tree/main/HW3" target="_blank">https://github.com/Benedict-CS/Operating-System-NYCU-2023/tree/main/HW3</a></p>
                                            <p><a href="https://sysprog21.github.io/lkmpg/" target="_blank">https://sysprog21.github.io/lkmpg/</a></p>


                                        <footer class="post-footer">
                                            <div class="post-tags">
                                                <a href="../../tags/OS/index.html" rel="tag">#
                                                    OS</a>
                                                <a href="../../tags/University/index.html" rel="tag">#
                                                    University</a>
                                            </div>
                                            <span class="post-nav-divider"></span>
                                            <!-- <div class="post-nav">
                                                <div class="post-nav-next post-nav-item">
                                                    <a href="../2021/Intel.html" rel="next">
                                                        <i class="fa fa-chevron-left"></i>
                                                        全國賽 - Intel® DevCup x OpenVINO™ Toolkit 入圍
                                                    </a>
                                                </div>
                                            </div> -->

                                            <div class="post-nav">
                                                <div class="post-nav-next post-nav-item">
                                                    <a href="../2024/linux_scheduling_policies.html" rel="next">
                                                        <i class="fa fa-chevron-left"></i>
                                                        Apply different scheduling policies
                                                    </a>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                            </article>
                        </div>
                    </div>
                </div>
                <div class="sidebar-toggle">
                    <div class="sidebar-toggle-line-wrap">
                        <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
                        <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
                        <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
                    </div>
                </div>
                <aside id="sidebar" class="sidebar">
                    <div class="sidebar-inner">
                        <ul class="sidebar-nav motion-element">
                            <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">目錄</li>
                        </ul>
                        <div class="post-site-overview-wrap motion-element sidebar-panel sidebar-panel-active">
                            <div class="post-toc">
                                <div>
                                    <ol class="nav">
                                        <li class="nav-item nav-level-1">
                                            <a class="nav-link" href="#Outline">
                                                <span class="nav-number">1.</span>
                                                <span class="nav-text">Outline</span></a>
                                        </li>
                                        <li class="nav-item nav-level-1">
                                            <a class="nav-link" href="#Content">
                                                <span class="nav-number">2.</span>
                                                <span class="nav-text">Implement a kernel module</span>
                                            </a>
                                        </li>
                                      
                                        <li class="nav-item nav-level-1">
                                            <a class="nav-link" href="#Reference">
                                                <span class="nav-number">3.</span>
                                                <span class="nav-text">Reference</span>
                                            </a>
                                        </li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </main>
        <!-- Footer的一些内容 -->
        <footer id="footer" class="footer">
            <div class="footer-inner">
                <div class="copyright">&copy;
                    <span itemprop="copyrightYear">2024</span>
                    <span class="author" itemprop="copyrightHolder">Benedict</span>
                </div>
                <div class="busuanzi-count">
                    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
                    <span class="post-meta-item-icon">
                        <i class="fa fa-user"></i>
                    </span>
                    <span class="site-uv" title="Total Visitors">
                        <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
                    </span>
                    <span class="post-meta-divider">|</span>
                    <span class="post-meta-item-icon">
                        <i class="fa fa-eye"></i>
                    </span>
                    <span class="site-pv" title="Total Views">
                        <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
                    </span>
                </div>
            </div>
        </footer>
        <!-- 回到top的箭頭 -->
        <div class="back-to-top">
            <i class="fa fa-arrow-up"></i>
        </div>
    </div>
    <script>"[object Function]" !== Object.prototype.toString.call(window.Promise) && (window.Promise = null)</script>
    <script src="../../lib/jquery/index.js"></script>
    <script src="../../lib/velocity/velocity.min.js"></script>
    <script src="../../lib/velocity/velocity.ui.min.js"></script>
    <script src="../../js/utils.js"></script>
    <script src="../../js/motion.js"></script>
    <script src="../../js/baidu.js"></script>
    <script src="../../js/schemes/muse.js"></script>
    <script src="../../js/scrollspy.js"> </script>
    <script src="../../js/next-boot.js"></script>
</body>

</html>